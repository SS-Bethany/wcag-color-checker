<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ParentSquare WCAG Contrast Checker (Final Version)</title>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- BRANDING & CSS STYLING (ParentSquare) --- */
        :root {
            --primary-green: #5A7E00; 
            --accent-blue: #1B7DBA;   
            --accent-red: #C7382F;    
            --neutral-border: #cccccc;
            --page-bg: #eeeeee; 
            --container-bg: #ffffff;
            --text-dark: #333333;
            --pass-color: #5A7E00; 
            --fail-color: #C7382F; 
            /* New Slider Colors */
            --slider-dark-gray: #555555;
            --slider-light-gray: #E0E0E0;
            /* New Status Backgrounds */
            --status-pass-bg: #e6ffe6;
            --status-fail-bg: #ffe6e6;
            --status-mixed-bg: #f0f0f0;
        }

        body {
            font-family: 'Work Sans', sans-serif;
            padding: 0; 
            background-color: var(--page-bg);
            color: var(--text-dark);
            min-width: 320px;
        }

        /* --- Global Margin Wrapper (Centered) --- */
        #app-container {
            max-width: 1400px;
            padding: 0 80px; 
            margin: 0 auto; 
        }
        
        /* --- Title Styling (Top Left Alignment) --- */
        h1 {
            font-weight: bold;
            color: var(--primary-green);
            text-align: left;
            font-size: 2.2em;
            padding-top: 20px; 
            margin-bottom: 20px; 
            display: block; 
        }

        /* H2 STYLE (Underline REMOVED) */
        h2 {
            font-weight: bold;
            margin-top: 0; 
            padding: 15px 0 0 0; /* Adjust padding top/bottom */
            background-color: transparent; 
            border-radius: 0; 
            color: var(--text-dark);
            margin-left: 0 !important; 
            
            border-bottom: none; /* Removed underline */
            margin-bottom: 15px; 
        }

        /* --- TOP SECTION GRID: INPUT (1/4) & LIVE CHECK (3/4) --- */
        #header-content {
            display: grid;
            grid-template-columns: 1fr 3fr; /* Input 1fr (25%) | Live Check 3fr (75%) */
            gap: 40px;
            margin-bottom: 30px;
            align-items: flex-start;
        }
        
        /* Input Box (Left, 1/4 width) */
        #main-input-wrapper {
            grid-column: 1 / 2;
            max-width: 100%;
            background-color: var(--container-bg);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            justify-content: space-between; 
            margin-top: 0;
        }

        /* LIVE CHECK WRAPPER (Right, 3/4 width) */
        #live-check-wrapper {
             grid-column: 2 / 3;
        }
        
        /* --- RESULTS: LIVE CARDS (EXACTLY 3-WIDE) --- */
        #card-results {
            grid-template-columns: repeat(3, 1fr); 
            gap: 20px;
            margin: 0;
            display: grid;
        }
        .contrast-card {
            background-color: var(--container-bg);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            border: 1px solid var(--neutral-border);
            display: flex;
            flex-direction: column;
            min-height: 220px;
            min-width: 180px; 
        }
        
        /* --- MIDDLE SECTION: STACKED PAIRINGS (Aligned to Right 3/4) --- */
        #stacked-results-wrapper {
            display: grid;
            grid-template-columns: 1fr 3fr; /* Matches the top section's grid */
            gap: 40px;
            margin-bottom: 40px;
        }
        
        #pairings-wrapper {
            grid-column: 2 / 3;
            margin-top: 0;
        }
        #filler-column { 
             grid-column: 1 / 2;
        }

        /* --- COMPATIBLE PAIRINGS CARDS (EXACTLY 3-WIDE) --- */
        #pairings-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr); 
            gap: 15px;
            margin-top: 20px;
        }

        /* --- BOTTOM SECTION: DISCLAIMER (Aligned to Right 3/4) --- */
        #disclaimer-container {
            display: grid;
            grid-template-columns: 1fr 3fr; /* Matches the top section's grid */
            gap: 40px;
        }
        #disclaimer-box {
            grid-column: 2 / 3; /* Aligns under Live Check/Pairings */
            border: 1px solid var(--accent-blue);
            background-color: #eaf6ff;
            padding: 20px;
            border-radius: 8px;
            margin-top: 40px;
            margin-bottom: 20px;
            font-size: 0.95em;
        }


        /* Input Field and Button Styling */
        #color-input {
            padding: 10px;
            margin: 10px 0 15px 0;
            border: 1px solid var(--neutral-border);
            font-size: 16px;
            width: 100%;
            flex-grow: 1; 
            min-height: 80px;
            box-sizing: border-box;
            resize: vertical;
            font-family: monospace;
            border-radius: 4px; 
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05) inset;
        }
        button {
            font-weight: bold;
            padding: 10px 20px;
            background-color: var(--primary-green); 
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 4px; 
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #4c6a00;
        }

        /* Swatches (Needs to wrap if space is limited) */
        #input-controls {
            display: flex;
            flex-direction: column; 
            gap: 15px;
            align-items: flex-start;
        }

        #color-swatches {
            display: flex; 
            flex-wrap: wrap;
            gap: 5px; 
            margin-top: 15px; 
            margin-bottom: 0; 
            align-items: center;
        }
        .color-swatch {
            width: 30px;
            height: 30px;
            margin: 0; 
            border: 2px solid var(--primary-green);
            border-radius: 50%;
        }

        /* --- CARD/INDICATOR STYLING (Kept for function) --- */
        .card-controls {
            padding: 15px;
            background-color: var(--container-bg);
            border-top: 1px solid var(--neutral-border);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .pass-fail-indicator {
            padding: 8px;
            border-radius: 4px;
            font-weight: bold;
            margin-top: auto;
            font-size: 1em;
            display: flex;
            justify-content: space-around;
            align-items: center;
            gap: 10px;
        }
        .pass-fail-indicator.pass { background-color: var(--status-pass-bg); }
        .pass-fail-indicator.fail { background-color: var(--status-fail-bg); }
        .pass-fail-indicator.mixed { background-color: var(--status-mixed-bg); }
        .indicator-label {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.9em;
            white-space: nowrap;
        }
        .indicator-label.pass { background-color: var(--primary-green); color: white; }
        .indicator-label.fail { background-color: var(--accent-red); color: white; }
        .pairing-card {
            background-color: var(--container-bg);
            border-radius: 8px;
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            border: 1px solid var(--neutral-border);
            text-align: center;
        }
        .card-preview {
            padding: 20px;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 1.5em;
            font-weight: bold;
            transition: background-color 0.2s, color 0.2s;
        }
        .card-preview-text {
            margin-top: 5px;
            font-size: 0.6em;
            opacity: 0.8;
        }
        .ratio-display {
            font-size: 1.1em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 10px;
            padding: 5px;
            border-bottom: 1px dotted #ccc;
        }
        .slider-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        input[type="range"] {
            flex-grow: 1; 
            width: 100%;
            -webkit-appearance: none;
            height: 8px;
            background: var(--slider-light-gray);
            border-radius: 5px;
            outline: none;
            transition: opacity .2s;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-green);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 0 2px rgba(0,0,0,0.3);
        }
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-green);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 0 2px rgba(0,0,0,0.3);
        }
        .pairing-preview {
            padding: 10px;
            font-weight: bold;
            font-size: 0.9em;
            line-height: 1.2;
            min-height: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .pairing-details {
            padding: 8px;
            font-size: 0.8em;
            color: var(--text-dark);
            border-top: 1px dotted #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .pairing-indicator {
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9em;
        }
        .pairing-indicator.pass { background-color: var(--status-pass-bg); color: var(--pass-color); }
        #disclaimer-box h3 {
            color: var(--accent-blue);
            margin-top: 0;
            margin-bottom: 10px;
            padding-bottom: 0;
            border-bottom: none;
        }
        #disclaimer-box p {
            margin-bottom: 10px;
        }


        /* --- Responsive fallback for smaller screens --- */
        @media (max-width: 900px) {
            #app-container {
                padding: 0 20px; 
            }
            h1 {
                text-align: center;
                padding-top: 20px; 
                margin-bottom: 20px;
            }
            #header-content, #stacked-results-wrapper, #disclaimer-container {
                grid-template-columns: 1fr; /* Stack columns */
                gap: 20px;
            }
            #main-input-wrapper, #live-check-wrapper, #pairings-wrapper, #disclaimer-box {
                grid-column: 1 / -1; /* Full width */
                margin-top: 0;
            }
            /* Order elements vertically */
            #main-input-wrapper { order: 1; }
            #live-check-wrapper { order: 2; }
            #pairings-wrapper { order: 3; }
            #disclaimer-box { order: 4; }
        }
    </style>
</head>
<body>
    <div id="app-container">
        
        <h1>
            ParentSquare Contrast Checker
        </h1>
	<hr>
	</br>
	</br>

        <div id="header-content">
            
            <div id="main-input-wrapper">
                <div>
                    <p style="margin-top: 0; margin-bottom: 20px; font-weight: bold;">
                        Enter your colors:
                    </p>
                    
                    <textarea id="color-input" 
                        placeholder="#5A7E00 #1B7DBA #F4BE54 #BC609F #FFFFFF" 
                        rows="4">#5A7E00 #1B7DBA #F4BE54 #BC609F #FFFFFF</textarea>
                </div>
                
                <div id="input-controls">
                    <button onclick="checkContrast()">Check Contrast</button>
                    <div id="color-swatches"></div>
                </div>
            </div>

            <div id="live-check-wrapper">
                
                <div id="card-results">
                    </div>
            </div>
        </div>
        
        <div id="stacked-results-wrapper">
             <div id="filler-column">
                </div>
            <div id="pairings-wrapper">
                <hr> <h2 style="margin-top: 0;">Compatible Palette Pairings</h2>
                <p style="margin-top: -10px; margin-bottom: 15px; font-size: 0.9em;">(Pairs that achieve a ratio of 4.5:1 or higher)</p>
                <div id="pairings-cards">
                    </div>
            </div>
        </div>

        <div id="disclaimer-container">
            <div id="filler-column">
                </div>
            <div id="disclaimer-box">
                <h3>ðŸ’¡ Important Note on SmartSite Accessibility</h3>
                <p>Our goal is to make all SmartSite properties accessible by meeting the rigorous standards set by the Web Content Accessibility Guidelines (WCAG) 2.1 AA. By adhering to these guidelines, we ensure that our digital content is robust and compatible with various assistive technologies, providing an equitable and effective user experience for all.</p>
                <p>Our focus on the stricter 4.5:1 contrast ratio for all normal textâ€”even when a 3:1 ratio might be technically allowed for "large text"â€”reflects our proactive approach to providing a higher standard of accessibility across all body and display text. This commitment means SmartSite sites are built from the ground up to be accessible, usable, and compliant.</p>
            </div>
        </div>
        
    </div>
    <script>
        // Define WCAG constants
        const WCAG_AA_NORMAL = 4.5;
        const WCAG_AAA_NORMAL = 7.0; 
        
        // --- Core WCAG Calculation Functions ---
        function hexToRgb(hex) {
            let cleanHex = hex.trim().toUpperCase().replace(/^#/, '');
            if (cleanHex.length === 3) {
                cleanHex = cleanHex.split('').map(char => char + char).join('');
            }
            if (cleanHex.length !== 6) {
                return [0, 0, 0]; 
            }
            const r = parseInt(cleanHex.substring(0, 2), 16);
            const g = parseInt(cleanHex.substring(2, 4), 16);
            const b = parseInt(cleanHex.substring(4, 6), 16);
            return [r, g, b];
        }

        function getLuminance(rgb) {
            const a = rgb.map(v => {
                v /= 255;
                return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
            });
            return 0.2126 * a[0] + 0.7152 * a[1] + 0.0722 * a[2];
        }

        function getContrastRatio(l1, l2) {
            const lighter = Math.max(l1, l2);
            const darker = Math.min(l1, l2);
            return (lighter + 0.05) / (darker + 0.05);
        }

        function checkWCAG_AA(ratio) {
            return ratio >= WCAG_AA_NORMAL;
        }
        
        function checkWCAG_AAA(ratio) { 
            return ratio >= WCAG_AAA_NORMAL;
        }
        
        function rgbToHex([r, g, b]) {
            const toHex = c => {
                const val = Math.round(Math.max(0, Math.min(255, c)));
                const hex = val.toString(16);
                return hex.length === 1 ? '0' + hex : hex;
            };
            return `${toHex(r)}${toHex(g)}${toHex(b)}`.toUpperCase();
        }
        
        function adjustBrightness(rgb, percent) {
            const amount = Math.floor(2.55 * percent);
            
            const r = Math.max(0, Math.min(255, rgb[0] + amount));
            const g = Math.max(0, Math.min(255, rgb[1] + amount));
            const b = Math.max(0, Math.min(255, rgb[2] + amount));
            
            return [r, g, b];
        }

        // --- Live Card Toggle and Update Functions ---
        
        function toggleCardTextColor(cardIndex, fgOriginalHex) {
            const card = document.getElementById(`contrast-card-${cardIndex}`);
            const previewDiv = card.querySelector('.card-preview');
            const button = card.querySelector('.text-toggle-btn');
            
            const currentTextHex = card.dataset.textColor;
            let newTextHex;
            let buttonText;
            
            if (currentTextHex === '#000000') { 
                newTextHex = '#FFFFFF';
                buttonText = 'Switch to Black Text';
                button.classList.remove('black-text');
                button.classList.add('white-text');
            } else {
                newTextHex = '#000000';
                buttonText = 'Switch to White Text';
                button.classList.remove('white-text');
                button.classList.add('black-text');
            }
            
            // 1. SET THE NEW TEXT COLOR VISUALLY AND IN THE DATA ATTRIBUTE
            previewDiv.style.color = newTextHex;
            card.dataset.textColor = newTextHex; 
            button.textContent = buttonText;
            
            // 2. RUN THE CONTRAST CHECK WITH THE NEW COLOR
            updateCardContrast(cardIndex, fgOriginalHex);
        }

        function updateCardContrast(cardIndex, fgOriginalHex) {
            const card = document.getElementById(`contrast-card-${cardIndex}`);
            const slider = card.querySelector('input[type="range"]');
            
            // 1. Adjust Background Color
            const adjustment = parseFloat(slider.value);
            const fgRgbBase = hexToRgb(fgOriginalHex);
            const adjustedFgRgb = adjustBrightness(fgRgbBase, adjustment);
            const adjustedFgHex = `#${rgbToHex(adjustedFgRgb)}`;
            
            // 2. Determine Foreground (Text) Color 
            const textHex = card.dataset.textColor;
            
            // 3. Calculate Contrast
            const fgL = getLuminance(hexToRgb(textHex));
            const bgL = getLuminance(adjustedFgRgb); 
            
            const ratio = getContrastRatio(fgL, bgL);
            const passesAA = checkWCAG_AA(ratio);
            const passesAAA = checkWCAG_AAA(ratio);

            // 4. Update Card Elements
            const previewDiv = card.querySelector('.card-preview');
            const ratioDisplay = card.querySelector('.ratio-display');
            const sliderTextDisplay = card.querySelector('.slider-value-display');
            const passFailIndicator = card.querySelector('.pass-fail-indicator');
            const textCodeDisplay = card.querySelector('.card-preview-text');
            const aaaIndicator = card.querySelector('.aaa-indicator');
            const aaIndicator = card.querySelector('.aa-indicator');

            // Update Preview (Card Background color only)
            previewDiv.style.backgroundColor = adjustedFgHex;
            
            // Update the helper text to show the new adjusted hex
            textCodeDisplay.textContent = `BG: ${adjustedFgHex} / FG: ${textHex}`;
            
            ratioDisplay.textContent = `Ratio: ${ratio.toFixed(2)}:1`;

            sliderTextDisplay.textContent = adjustment > 0 ? `+${adjustment}%` : `${adjustment}%`;

            // 5. Update AAA Status 
            aaaIndicator.classList.remove('pass', 'fail');
            aaaIndicator.classList.add(passesAAA ? 'pass' : 'fail');
            aaaIndicator.innerHTML = passesAAA ? '&#10003; AAA' : '&#10007; AAA';

            // 6. Update AA Status 
            aaIndicator.classList.remove('pass', 'fail');
            aaIndicator.classList.add(passesAA ? 'pass' : 'fail');
            aaIndicator.innerHTML = passesAA ? '&#10003; AA' : '&#10007; AA';

            // 7. Update Container Background
            passFailIndicator.classList.remove('pass', 'fail', 'mixed');
            if (passesAAA) {
                passFailIndicator.classList.add('pass');
            } else if (passesAA) {
                 passFailIndicator.classList.add('mixed');
            } else {
                 passFailIndicator.classList.add('fail');
            }
        }


        // --- Card Generation and Container Updates ---
        
        function updateSwatches(hexCodes) {
            const swatchesDiv = document.getElementById('color-swatches');
            swatchesDiv.innerHTML = '';
            
            hexCodes.forEach(hex => {
                const swatch = document.createElement('div');
                swatch.className = 'color-swatch';
                swatch.style.backgroundColor = hex;
                swatchesDiv.appendChild(swatch);
            });
        }

        // Function to create the interactive live adjustment card
        function createResultCard(foregroundHex, index) {
            const fgLuminance = getLuminance(hexToRgb(foregroundHex));
            const initialTextColor = fgLuminance > 0.179 ? '#000000' : '#FFFFFF'; 
            
            // Initial contrast check
            const initialFgL = getLuminance(hexToRgb(initialTextColor));
            const initialBgL = getLuminance(hexToRgb(foregroundHex));
            const initialRatio = getContrastRatio(initialFgL, initialBgL);
            
            const passesAA = checkWCAG_AA(initialRatio); 
            const passesAAA = checkWCAG_AAA(initialRatio); 

            const aaaClass = passesAAA ? 'pass' : 'fail';
            const aaClass = passesAA ? 'pass' : 'fail';

            const buttonText = initialTextColor === '#000000' ? 'Switch to White Text' : 'Switch to Black Text';
            const buttonClass = initialTextColor === '#000000' ? 'black-text' : 'white-text';
            
            // Determine overall indicator background color
            let indicatorClass;
            if (passesAAA) {
                indicatorClass = 'pass';
            } else if (passesAA) {
                indicatorClass = 'mixed';
            } else {
                indicatorClass = 'fail';
            }
            
            const aaaText = passesAAA ? '&#10003; AAA' : '&#10007; AAA';
            const aaText = passesAA ? '&#10003; AA' : '&#10007; AA';

            // Corrected helper text label in the initial card creation
            const helperText = `BG: ${foregroundHex} / FG: ${initialTextColor}`;


            let html = `
                <div class="contrast-card" id="contrast-card-${index}" 
                     data-original-hex="${foregroundHex}" 
                     data-text-color="${initialTextColor}">
                    <div class="card-preview" 
                        style="background-color: ${foregroundHex}; color: ${initialTextColor};">
                        Preview Text
                        <span class="card-preview-text">${helperText}</span>
                    </div>
                    
                    <div class="card-controls">
                        <div class="ratio-display">Ratio: ${initialRatio.toFixed(2)}:1</div>

                        <div class="card-control-group">
                            <label>Text Color</label>
                            <button 
                                class="text-toggle-btn ${buttonClass}" 
                                onclick="toggleCardTextColor(${index}, '${foregroundHex}')">
                                ${buttonText}
                            </button>
                        </div>

                        <div class="card-control-group">
                            <label>Luminosity Adjust</label>
                            <div class="slider-wrapper">
                                <span class="slider-value-display">0%</span>
                                <input type="range" 
                                    min="-100" max="100" value="0" 
                                    id="slider-${index}" 
                                    oninput="updateCardContrast(${index}, '${foregroundHex}')">
                            </div>
                        </div>

                        <div class="pass-fail-indicator ${indicatorClass}">
                            <span class="indicator-label aaa-indicator ${aaaClass}">${aaaText}</span>
                            <span class="indicator-label aa-indicator ${aaClass}">${aaText}</span>
                        </div>
                    </div>
                </div>
            `;
            return html;
        }

        function checkAgainstWhite(hexCodes) {
            const resultsCardContainer = document.getElementById('card-results');
            resultsCardContainer.innerHTML = ''; 
            
            let html = '';
            
            hexCodes.forEach((fgHex, index) => {
                html += createResultCard(fgHex, index);
            });

            resultsCardContainer.innerHTML = html;
        }

        // --- Function to create a simple, static pairing card ---
        function createPairingCard(foregroundHex, backgroundHex, ratio) {
            const ratioStr = ratio.toFixed(2);
            const fgLuminance = getLuminance(hexToRgb(foregroundHex));
            const bgLuminance = getLuminance(hexToRgb(backgroundHex));
            const fgTextColor = fgLuminance > 0.179 ? '#000000' : '#FFFFFF';
            const bgTextColor = bgLuminance > 0.179 ? '#000000' : '#FFFFFF';

            return `
                <div class="pairing-card">
                    <div class="pairing-preview" style="background-color: ${backgroundHex}; color: ${foregroundHex};">
                        Preview Text
                    </div>
                    <div class="pairing-details">
                        <span style="color: ${fgTextColor}; background-color: ${foregroundHex}; padding: 3px 6px; border-radius: 3px;">FG: ${foregroundHex}</span>
                        <span style="color: ${bgTextColor}; background-color: ${backgroundHex}; padding: 3px 6px; border-radius: 3px;">BG: ${backgroundHex}</span>
                    </div>
                    <div class="pairing-details" style="border-top: none;">
                        <span>Ratio: <strong>${ratioStr}:1</strong></span>
                        <span class="pairing-indicator pass">&#10003; AA PASS</span>
                    </div>
                </div>
            `;
        }
        
        // Renders compatible pairings as cards
        function checkAllPairings(hexCodes) {
            const resultsContainer = document.getElementById('pairings-cards');
            resultsContainer.innerHTML = ''; 

            let html = '';
            let passesFound = 0;
            
            for (let i = 0; i < hexCodes.length; i++) {
                for (let j = 0; j < hexCodes.length; j++) {
                    if (i === j) continue;
                    
                    const fgHex = hexCodes[i]; 
                    const bgHex = hexCodes[j]; 

                    const fgL = getLuminance(hexToRgb(fgHex));
                    const bgL = getLuminance(hexToRgb(bgHex));
                    
                    const ratio = getContrastRatio(fgL, bgL);
                    
                    if (checkWCAG_AA(ratio)) {
                            html += createPairingCard(fgHex, bgHex, ratio);
                            passesFound++;
                    }
                }
            }

            if (passesFound === 0) {
                 resultsContainer.innerHTML = '<p style="text-align: center; color: var(--fail-color); font-weight: bold; padding: 10px; border: 1px dashed var(--neutral-border); border-radius: 4px;">No pairings passed AA contrast.</p>';
            } else {
                 resultsContainer.innerHTML = html;
            }
        }
        
        /**
         * Main function triggered by the button click and on page load.
         */
        function checkContrast() {
            const inputElement = document.getElementById('color-input');
            const rawInput = inputElement.value.trim().toUpperCase();
            
            const hexCodeRegex = /#?([0-9A-F]{6})/g;
            const matches = [...rawInput.matchAll(hexCodeRegex)];
            
            const hexCodes = matches.map(match => {
                const rgb = hexToRgb(match[0]);
                return `#${rgbToHex(rgb)}`;
            });

            if (hexCodes.length === 0) {
                alert("Please enter at least one valid 6-digit hex code.");
                document.getElementById('card-results').innerHTML = '';
                document.getElementById('pairings-cards').innerHTML = '';
                updateSwatches([]);
                return;
            }
            
            updateSwatches(hexCodes);

            checkAgainstWhite(hexCodes);
            checkAllPairings(hexCodes);
        }

        // --- Initialization ---

        document.addEventListener('DOMContentLoaded', () => {
             checkContrast();
        });
    </script>
</body>
</html>